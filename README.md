# Leasing Asset Market Analyzer

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä—ã–Ω–æ—á–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ª–∏–∑–∏–Ω–≥–∞ —Å AI-–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–í–∞—Ä–∏–∞–Ω—Ç 1 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
```bash
python run_web.py
```

**–í–∞—Ä–∏–∞–Ω—Ç 2:**
```bash
python parser_b.py --web
```

**–í–∞—Ä–∏–∞–Ω—Ç 3 (–∏–∑ –ø–∞–ø–∫–∏ api):**
```bash
cd api
python main.py
```

–ó–∞—Ç–µ–º –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8000**

### –ó–∞–ø—É—Å–∫ CLI (–∫–æ–Ω—Å–æ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º)

```bash
python parser_b.py
```

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîç –ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (Perplexity Sonar)

1. **–ü–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–æ–≤ —á–µ—Ä–µ–∑ Sonar** ‚Äî –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–æ–≤–Ω–æ 3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∞–Ω–∞–ª–æ–≥–∞
2. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–∞–∂–¥—ã–º –∞–Ω–∞–ª–æ–≥–æ–º** ‚Äî Sonar —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞
3. **–°—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è** ‚Äî –∫–∞–∂–¥–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
4. **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑** ‚Äî –ø–ª—é—Å—ã/–º–∏–Ω—É—Å—ã –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞, —Ä–∞–∑–Ω–∏—Ü–∞ –≤ —Ü–µ–Ω–µ, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### üìä –ê–Ω–∞–ª–∏–∑ –≤–∫–ª—é—á–∞–µ—Ç:

- –†—ã–Ω–æ—á–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω
- –ú–µ–¥–∏–∞–Ω–Ω–∞—è –∏ —Å—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ü–µ–Ω–æ–π –∫–ª–∏–µ–Ω—Ç–∞
- –ü–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑ –∞–Ω–∞–ª–æ–≥–æ–≤
- AI-–æ—Ü–µ–Ω–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π (0-10 –±–∞–ª–ª–æ–≤)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø–ª—é—Å–∞–º–∏/–º–∏–Ω—É—Å–∞–º–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É

### üé® –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
SERPER_API_KEY=your_serper_api_key
GIGACHAT_AUTH_DATA=your_gigachat_auth_data

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π Perplexity API
PERPLEXITY_API_KEY=pplx-your_perplexity_api_key

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ artemox.com (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
PERPLEXITY_API_KEY=sk-your_proxy_api_key
PERPLEXITY_BASE_URL=https://api.artemox.com/v1
PERPLEXITY_MODEL=sonar
```

#### üîë –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Perplexity API –∫–ª—é—á:

1. **–ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://www.perplexity.ai/settings/api
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç Perplexity
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API –∫–ª—é—á (–æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `pplx-`)

2. **–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:**
   
   **–î–ª—è –ø—Ä—è–º–æ–≥–æ Perplexity API:**
   ```env
   PERPLEXITY_API_KEY=pplx-–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
   ```
   
   **–î–ª—è –ø—Ä–æ–∫—Å–∏ (artemox.com) - —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:**
   ```env
   PERPLEXITY_API_KEY=sk-–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
   PERPLEXITY_BASE_URL=https://api.artemox.com/v1
   PERPLEXITY_MODEL=sonar
   ```
   
   ‚ö†Ô∏è **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–∫—Å–∏ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `sonar-reasoning`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `sonar` –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–µ –ø—É—Å—Ç—ã–º - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–µ—Ä–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—É—é –º–æ–¥–µ–ª—å.
   
   ‚ö†Ô∏è **–í–ê–ñ–ù–û:** 
   - –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `pplx-` (–ø—Ä—è–º–æ–π API) –∏–ª–∏ `sk-` (–ø—Ä–æ–∫—Å–∏)
   - –ë–µ–∑ –∫–∞–≤—ã—á–µ–∫ –∏ –ø—Ä–æ–±–µ–ª–æ–≤ –≤–æ–∫—Ä—É–≥ `=`
   - –ï—Å–ª–∏ –∫–ª—é—á –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-`, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –ø—Ä–æ–∫—Å–∏

3. **–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞:**
   ```env
   # –ü—Ä—è–º–æ–π Perplexity API
   PERPLEXITY_API_KEY=pplx-abc123def456ghi789jkl012mno345pqr678stu901vwx234yz
   
   # –ü—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ artemox.com (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è)
   PERPLEXITY_API_KEY=sk-abc123def456ghi789jkl012mno345pqr678stu901vwx234yz
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `.env` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (—Ä—è–¥–æ–º —Å `parser_b.py`)
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞
   - –í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: `[SONAR] Perplexity Sonar API initialized`

**Perplexity Sonar API** - –û–°–ù–û–í–ù–û–ô –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –∞–Ω–∞–ª–æ–≥–æ–≤:
- üîç **–ü–æ–∏—Å–∫ –∞–Ω–∞–ª–æ–≥–æ–≤** - Sonar —è–≤–ª—è–µ—Ç—Å—è –ü–ï–†–í–ò–ß–ù–´–ú –º–µ—Ç–æ–¥–æ–º –ø–æ–∏—Å–∫–∞ 3 –∞–Ω–∞–ª–æ–≥–æ–≤
- ‚öñÔ∏è **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π** - Sonar —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ —Å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞
- üîó **–°—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è** - –∫–∞–∂–¥–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- üí∞ **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏

**–í–∞–∂–Ω–æ:** 
- –ï—Å–ª–∏ `PERPLEXITY_API_KEY` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –º–µ—Ç–æ–¥—ã (GigaChat/Google)
- –ü—Ä–∏ –æ—à–∏–±–∫–µ 401 (Unauthorized) –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞ –≤ `.env` —Ñ–∞–π–ª–µ

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `python parser_b.py --web`
2. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000
3. –í–≤–µ–¥–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç –ª–∏–∑–∏–Ω–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "BMW M5 2024")
4. –£–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∞–Ω–∞–ª–∏–∑"

### API

```python
from parser_b import run_analysis

result = run_analysis(
    item="BMW M5 2024",
    client_price=8000000,
    use_ai=True,
    num_results=5
)
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ parser_b.py          # –û—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –∞–Ω–∞–ª–∏–∑–∞
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îú‚îÄ‚îÄ main.py          # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ templates/      # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ static/          # CSS, JS
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–ª–∞—Å—Å–µ `Config` –≤ `parser_b.py`:

- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ URL
- Rate limiting –¥–ª—è API
- –¢–∞–π–º–∞—É—Ç—ã Selenium
- –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç
- –ò –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

## üìù –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ URL (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 3-5 —Ä–∞–∑)
- ‚úÖ Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–∞–ª—é—Ç
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ Strategy pattern –¥–ª—è –ø–∞—Ä—Å–µ—Ä–æ–≤

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü–æ–∏—Å–∫ –ª—É—á—à–µ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
2. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –∏—Ö –º–µ–∂–¥—É —Å–æ–±–æ–π —á–µ—Ä–µ–∑ AI
3. –í—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–µ–µ (—Å –æ—Ü–µ–Ω–∫–æ–π 0-10)
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–Ω–∞–ª–æ–≥–∞–º–∏

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–Ω–∞–ª–æ–≥–∞:
1. –ù–∞—Ö–æ–¥—è—Ç—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è
2. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ª—É—á—à–µ–µ
3. –°—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å –ª—É—á—à–∏–º –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º
4. –í—ã–¥–∞—é—Ç—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –î–æ—Å—Ç—É–ø–µ–Ω –ª–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤
